import{a as F}from"./chunk-AQVKUACS.js";import{a as T,b as _,c as N,d as U,e as B,g as V,h as z,k as L,l as R}from"./chunk-A7KUYVBP.js";import{a as w}from"./chunk-BCTV2CAY.js";import{e as k,i as A}from"./chunk-35LWYR67.js";import{Ha as u,Hb as S,Ib as E,Jb as I,Na as g,Pa as d,Sb as D,Va as i,Wa as t,Xa as m,Ya as y,Z as b,Za as f,_a as p,db as r,eb as C,fa as h,fb as M,ga as x,ib as O,ta as P,xa as c,ya as v}from"./chunk-USG2AWOP.js";function j(n,l){if(n&1&&(i(0,"span"),r(1),t()),n&2){let e=p();c(),C(e.editingId()?"Update Picture":"Add Picture")}}function q(n,l){n&1&&m(0,"span",28)}function $(n,l){n&1&&(i(0,"div",29),r(1,"Loading pictures..."),t())}function G(n,l){n&1&&(i(0,"div",29),r(1," No pictures found. Add your first picture above. "),t())}function H(n,l){if(n&1&&(i(0,"p",41),r(1),t()),n&2){let e=p().$implicit;c(),C(e.description)}}function J(n,l){if(n&1){let e=y();i(0,"article",32)(1,"div",33),m(2,"img",34),t(),i(3,"div",35)(4,"h3"),r(5),t(),i(6,"p",36),r(7),t(),g(8,H,2,1,"p",37),t(),i(9,"div",38)(10,"button",39),f("click",function(){let o=h(e).$implicit,s=p(2);return x(s.editPicture(o))}),r(11,"Edit"),t(),i(12,"button",40),f("click",function(){let o=h(e).$implicit,s=p(2);return x(s.deletePicture(o))}),r(13," Delete "),t()()()}if(n&2){let e=l.$implicit,a=p(2);c(2),d("src",e.imageUrl,P)("alt",e.title||"Gallery image"),c(3),C(e.title),c(2),M("Category: ",e.category,""),c(),d("ngIf",e.description),c(4),d("disabled",a.saving())}}function K(n,l){if(n&1&&(i(0,"div",30),g(1,J,14,6,"article",31),t()),n&2){let e=p();c(),d("ngForOf",e.pictures())("ngForTrackBy",e.trackById)}}var ce=(()=>{class n{constructor(e,a,o){this.fb=e,this.picturesService=a,this.toast=o,this.pictures=u([]),this.loading=u(!0),this.saving=u(!1),this.editingId=u(null),this.form=this.fb.group({title:["",_.required],imageUrl:["",_.required],description:["",_.required],category:["",_.required]})}ngOnInit(){this.refresh()}onSubmit(){if(this.form.invalid){this.form.markAllAsTouched();return}this.saving.set(!0);let e=this.form.value,a=this.editingId();(a?this.picturesService.update(a,e):this.picturesService.create(e)).subscribe(s=>{this.saving.set(!1),s?(this.toast.show(a?"Picture updated.":"Picture added.","success"),this.resetForm(),this.refresh()):this.toast.show("Failed to save picture.","error")})}editPicture(e){e.id&&(this.editingId.set(e.id),this.form.patchValue({title:e.title,imageUrl:e.imageUrl,description:e.description,category:e.category}))}deletePicture(e){e.id&&(this.saving.set(!0),this.picturesService.delete(e.id).subscribe(a=>{this.saving.set(!1),a?(this.toast.show("Picture deleted.","success"),this.refresh()):this.toast.show("Failed to delete picture.","error")}))}resetForm(){this.editingId.set(null),this.form.reset({title:"",imageUrl:"",description:"",category:""})}refresh(){this.loading.set(!0),this.picturesService.getAll().subscribe(e=>{this.pictures.set(e||[]),this.loading.set(!1)})}trackById(e,a){return a.id}static{this.\u0275fac=function(a){return new(a||n)(v(L),v(F),v(D))}}static{this.\u0275cmp=b({type:n,selectors:[["app-pictures-admin"]],standalone:!0,features:[O],decls:45,vars:8,consts:[[1,"section","admin-pictures"],[1,"container"],["appReveal","",1,"admin-pictures__header"],["appReveal","",1,"admin-pictures__card","glass-card",3,"ngSubmit","formGroup"],[1,"form-grid"],[1,"form-field"],["for","title"],["id","title","type","text","formControlName","title"],["for","category"],["id","category","type","text","formControlName","category"],[1,"form-field","full"],["for","imageUrl"],["id","imageUrl","type","text","formControlName","imageUrl"],["for","description"],["id","description","rows","3","formControlName","description"],[1,"admin-pictures__actions"],["type","submit",1,"btn","btn--primary",3,"disabled"],[4,"ngIf"],["class","spinner",4,"ngIf"],["type","button",1,"btn","btn--outline",3,"click","disabled"],["routerLink","/admin/bio",1,"btn","btn--outline"],["routerLink","/admin/books",1,"btn","btn--outline"],["routerLink","/admin/contacts",1,"btn","btn--outline"],["routerLink","/admin/projects",1,"btn","btn--outline"],["routerLink","/",1,"btn","btn--outline"],["appReveal","",1,"admin-pictures__list"],["class","empty-state",4,"ngIf"],["class","pictures-grid",4,"ngIf"],[1,"spinner"],[1,"empty-state"],[1,"pictures-grid"],["class","picture-card glass-card",4,"ngFor","ngForOf","ngForTrackBy"],[1,"picture-card","glass-card"],[1,"picture-card__image"],["loading","lazy",3,"src","alt"],[1,"picture-card__info"],[1,"picture-card__category"],["class","picture-card__desc",4,"ngIf"],[1,"picture-card__actions"],[1,"btn","btn--sm","btn--outline",3,"click"],[1,"btn","btn--sm","btn--primary",3,"click","disabled"],[1,"picture-card__desc"]],template:function(a,o){a&1&&(i(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2"),r(4,"Admin Pictures"),t(),i(5,"p"),r(6,"Create, update, or remove gallery pictures."),t()(),i(7,"form",3),f("ngSubmit",function(){return o.onSubmit()}),i(8,"div",4)(9,"div",5)(10,"label",6),r(11,"Title"),t(),m(12,"input",7),t(),i(13,"div",5)(14,"label",8),r(15,"Category"),t(),m(16,"input",9),t(),i(17,"div",10)(18,"label",11),r(19,"Image URL"),t(),m(20,"input",12),t(),i(21,"div",10)(22,"label",13),r(23,"Description"),t(),m(24,"textarea",14),t()(),i(25,"div",15)(26,"button",16),g(27,j,2,1,"span",17)(28,q,1,0,"span",18),t(),i(29,"button",19),f("click",function(){return o.resetForm()}),r(30," Clear "),t(),i(31,"a",20),r(32,"Back to Bio"),t(),i(33,"a",21),r(34,"Manage Books"),t(),i(35,"a",22),r(36,"Manage Contacts"),t(),i(37,"a",23),r(38,"Manage Projects"),t(),i(39,"a",24),r(40,"Back to Portfolio"),t()()(),i(41,"div",25),g(42,$,2,0,"div",26)(43,G,2,0,"div",26)(44,K,2,2,"div",27),t()()()),a&2&&(c(7),d("formGroup",o.form),c(19),d("disabled",o.saving()||o.form.invalid),c(),d("ngIf",!o.saving()),c(),d("ngIf",o.saving()),c(),d("disabled",o.saving()),c(13),d("ngIf",o.loading()),c(),d("ngIf",!o.loading()&&o.pictures().length===0),c(),d("ngIf",!o.loading()&&o.pictures().length))},dependencies:[I,S,E,R,B,T,N,U,V,z,A,k,w],styles:[".admin-pictures__header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2rem}.admin-pictures__header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--text-primary);font-size:2rem;margin-bottom:.5rem}.admin-pictures__header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary)}.admin-pictures__card[_ngcontent-%COMP%]{padding:2rem;margin-bottom:2.5rem}.admin-pictures__actions[_ngcontent-%COMP%]{margin-top:1.5rem;display:flex;gap:1rem;flex-wrap:wrap}.admin-pictures__list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:1rem 1.5rem}.form-grid[_ngcontent-%COMP%]   .full[_ngcontent-%COMP%]{grid-column:1/-1}@media (max-width: 768px){.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.form-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.4rem}.form-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.85rem}.form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{background:#ffffff0a;border:1px solid rgba(255,255,255,.12);border-radius:10px;padding:.7rem .9rem;color:var(--text-primary);font-size:.9rem}.form-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}.pictures-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:1.5rem}.picture-card[_ngcontent-%COMP%]{padding:1.25rem;display:flex;flex-direction:column;gap:.9rem}.picture-card__image[_ngcontent-%COMP%]{width:100%;height:170px;border-radius:12px;overflow:hidden}.picture-card__image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:100%;object-fit:cover}.picture-card__info[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .4rem;color:var(--text-primary)}.picture-card__category[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.85rem;margin:0 0 .4rem}.picture-card__desc[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.85rem;margin:0}.picture-card__actions[_ngcontent-%COMP%]{display:flex;gap:.6rem}[data-theme=light][_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], [data-theme=light][_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{background:#ffffffe6;border-color:#0000001a}"]})}}return n})();export{ce as PicturesAdminComponent};
