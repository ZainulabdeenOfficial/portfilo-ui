import{a as A}from"./chunk-IKOG5KWI.js";import{a as F,b as s,c as T,d as U,e as N,f as w,g as z,h as V,i as R,j as L,k as q,l as D}from"./chunk-WBCQNZSA.js";import{a as E}from"./chunk-QFEF6XV5.js";import{e as I,i as B}from"./chunk-SSKLMT2D.js";import{Fb as S,Gb as O,Ha as g,Hb as P,Na as _,Pa as d,Qb as $,Va as i,Wa as t,Xa as m,Ya as C,Z as x,Za as u,_a as f,cb as n,db as b,eb as y,fa as k,ga as h,hb as M,xa as l,ya as v}from"./chunk-V5WJDX62.js";function j(o,c){if(o&1&&(i(0,"span"),n(1),t()),o&2){let e=f();l(),b(e.editingId()?"Update Book":"Add Book")}}function G(o,c){o&1&&m(0,"span",31)}function H(o,c){o&1&&(i(0,"div",32),n(1,"Loading books..."),t())}function J(o,c){o&1&&(i(0,"div",32),n(1," No books found. Add your first book above. "),t())}function K(o,c){if(o&1&&(i(0,"p",43),n(1),t()),o&2){let e=f().$implicit;l(),b(e.description)}}function Q(o,c){if(o&1){let e=C();i(0,"article",35)(1,"div",36)(2,"h3"),n(3),t(),i(4,"p",37),n(5),t(),_(6,K,2,1,"p",38),i(7,"p",39),n(8),t()(),i(9,"div",40)(10,"button",41),u("click",function(){let r=k(e).$implicit,p=f(2);return h(p.editBook(r))}),n(11,"Edit"),t(),i(12,"button",42),u("click",function(){let r=k(e).$implicit,p=f(2);return h(p.deleteBook(r))}),n(13," Delete "),t()()()}if(o&2){let e=c.$implicit,a=f(2);l(3),b(e.title),l(2),b(e.author),l(),d("ngIf",e.description),l(2),y("Rating: ",e.rating,""),l(4),d("disabled",a.saving())}}function W(o,c){if(o&1&&(i(0,"div",33),_(1,Q,14,5,"article",34),t()),o&2){let e=f();l(),d("ngForOf",e.books())("ngForTrackBy",e.trackById)}}var me=(()=>{class o{constructor(e,a,r){this.fb=e,this.booksService=a,this.toast=r,this.books=g([]),this.loading=g(!0),this.saving=g(!1),this.editingId=g(null),this.form=this.fb.group({title:["",s.required],author:["",s.required],description:["",s.required],coverImageUrl:["",s.required],amazonUrl:[""],rating:[0,[s.required,s.min(0),s.max(5)]]})}ngOnInit(){this.refresh()}onSubmit(){if(this.form.invalid){this.form.markAllAsTouched();return}this.saving.set(!0);let e=this.form.value,a=this.editingId();(a?this.booksService.update(a,e):this.booksService.create(e)).subscribe(p=>{this.saving.set(!1),p?(this.toast.show(a?"Book updated.":"Book added.","success"),this.resetForm(),this.refresh()):this.toast.show("Failed to save book.","error")})}editBook(e){e.id&&(this.editingId.set(e.id),this.form.patchValue({title:e.title,author:e.author,description:e.description,coverImageUrl:e.coverImageUrl,amazonUrl:e.amazonUrl,rating:e.rating}))}deleteBook(e){e.id&&(this.saving.set(!0),this.booksService.delete(e.id).subscribe(a=>{this.saving.set(!1),a?(this.toast.show("Book deleted.","success"),this.refresh()):this.toast.show("Failed to delete book.","error")}))}resetForm(){this.editingId.set(null),this.form.reset({title:"",author:"",description:"",coverImageUrl:"",amazonUrl:"",rating:0})}refresh(){this.loading.set(!0),this.booksService.getAll().subscribe(e=>{this.books.set(e||[]),this.loading.set(!1)})}trackById(e,a){return a.id}static{this.\u0275fac=function(a){return new(a||o)(v(q),v(A),v($))}}static{this.\u0275cmp=x({type:o,selectors:[["app-books-admin"]],standalone:!0,features:[M],decls:51,vars:8,consts:[[1,"section","admin-books"],[1,"container"],["appReveal","",1,"admin-books__header"],["appReveal","",1,"admin-books__card","glass-card",3,"ngSubmit","formGroup"],[1,"form-grid"],[1,"form-field"],["for","title"],["id","title","type","text","formControlName","title"],["for","author"],["id","author","type","text","formControlName","author"],["for","rating"],["id","rating","type","number","min","0","max","5","step","0.1","formControlName","rating"],[1,"form-field","full"],["for","description"],["id","description","rows","3","formControlName","description"],["for","coverImageUrl"],["id","coverImageUrl","type","text","formControlName","coverImageUrl"],["for","amazonUrl"],["id","amazonUrl","type","text","formControlName","amazonUrl"],[1,"admin-books__actions"],["type","submit",1,"btn","btn--primary",3,"disabled"],[4,"ngIf"],["class","spinner",4,"ngIf"],["type","button",1,"btn","btn--outline",3,"click","disabled"],["routerLink","/admin/contacts",1,"btn","btn--outline"],["routerLink","/admin/projects",1,"btn","btn--outline"],["routerLink","/admin/bio",1,"btn","btn--outline"],["routerLink","/",1,"btn","btn--outline"],["appReveal","",1,"admin-books__list"],["class","empty-state",4,"ngIf"],["class","books-grid",4,"ngIf"],[1,"spinner"],[1,"empty-state"],[1,"books-grid"],["class","book-card glass-card",4,"ngFor","ngForOf","ngForTrackBy"],[1,"book-card","glass-card"],[1,"book-card__info"],[1,"book-card__author"],["class","book-card__desc",4,"ngIf"],[1,"book-card__rating"],[1,"book-card__actions"],[1,"btn","btn--sm","btn--outline",3,"click"],[1,"btn","btn--sm","btn--primary",3,"click","disabled"],[1,"book-card__desc"]],template:function(a,r){a&1&&(i(0,"section",0)(1,"div",1)(2,"div",2)(3,"h2"),n(4,"Admin Books"),t(),i(5,"p"),n(6,"Create, update, or remove books displayed on the portfolio."),t()(),i(7,"form",3),u("ngSubmit",function(){return r.onSubmit()}),i(8,"div",4)(9,"div",5)(10,"label",6),n(11,"Title"),t(),m(12,"input",7),t(),i(13,"div",5)(14,"label",8),n(15,"Author"),t(),m(16,"input",9),t(),i(17,"div",5)(18,"label",10),n(19,"Rating (0-5)"),t(),m(20,"input",11),t(),i(21,"div",12)(22,"label",13),n(23,"Description"),t(),m(24,"textarea",14),t(),i(25,"div",12)(26,"label",15),n(27,"Cover Image URL"),t(),m(28,"input",16),t(),i(29,"div",12)(30,"label",17),n(31,"Amazon URL"),t(),m(32,"input",18),t()(),i(33,"div",19)(34,"button",20),_(35,j,2,1,"span",21)(36,G,1,0,"span",22),t(),i(37,"button",23),u("click",function(){return r.resetForm()}),n(38," Clear "),t(),i(39,"a",24),n(40,"Manage Contacts"),t(),i(41,"a",25),n(42,"Manage Projects"),t(),i(43,"a",26),n(44,"Back to Bio"),t(),i(45,"a",27),n(46,"Back to Portfolio"),t()()(),i(47,"div",28),_(48,H,2,0,"div",29)(49,J,2,0,"div",29)(50,W,2,2,"div",30),t()()()),a&2&&(l(7),d("formGroup",r.form),l(27),d("disabled",r.saving()||r.form.invalid),l(),d("ngIf",!r.saving()),l(),d("ngIf",r.saving()),l(),d("disabled",r.saving()),l(11),d("ngIf",r.loading()),l(),d("ngIf",!r.loading()&&r.books().length===0),l(),d("ngIf",!r.loading()&&r.books().length))},dependencies:[P,S,O,D,N,F,w,T,U,L,R,z,V,B,I,E],styles:[".admin-books__header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2.5rem}.admin-books__header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:var(--text-primary);font-size:2rem;margin-bottom:.5rem}.admin-books__header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--text-secondary)}.admin-books__card[_ngcontent-%COMP%]{padding:2rem;margin-bottom:2.5rem}.admin-books__actions[_ngcontent-%COMP%]{margin-top:1.5rem;display:flex;gap:1rem;flex-wrap:wrap}.admin-books__list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:1rem 1.5rem}.form-grid[_ngcontent-%COMP%]   .full[_ngcontent-%COMP%]{grid-column:1/-1}@media (max-width: 768px){.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.form-field[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.4rem}.form-field[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.85rem}.form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], .form-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{background:#ffffff0a;border:1px solid rgba(255,255,255,.12);border-radius:10px;padding:.7rem .9rem;color:var(--text-primary);font-size:.9rem}.form-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical}.books-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:1.5rem}.book-card[_ngcontent-%COMP%]{padding:1.25rem;display:flex;flex-direction:column;gap:1rem}.book-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0 0 .4rem;color:var(--text-primary)}.book-card__author[_ngcontent-%COMP%]{color:var(--text-secondary);margin-bottom:.5rem}.book-card__desc[_ngcontent-%COMP%]{color:var(--text-muted);font-size:.85rem}.book-card__rating[_ngcontent-%COMP%]{color:var(--text-secondary);font-size:.85rem}.book-card__actions[_ngcontent-%COMP%]{display:flex;gap:.6rem}[data-theme=light][_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%], [data-theme=light][_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{background:#ffffffe6;border-color:#0000001a}"]})}}return o})();export{me as BooksAdminComponent};
